(function(e){function t(t){for(var r,i,o=t[0],c=t[1],l=t[2],f=0,d=[];f<o.length;f++)i=o[f],a[i]&&d.push(a[i][0]),a[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);u&&u(t);while(d.length)d.shift()();return s.push.apply(s,l||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],r=!0,o=1;o<n.length;o++){var c=n[o];0!==a[c]&&(r=!1)}r&&(s.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},a={app:0},s=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var u=c;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"09da":function(e,t,n){},"0ff6":function(e,t,n){},1664:function(e,t,n){e.exports=n.p+"img/goal-blue.59a8e902.png"},"184a":function(e,t,n){},"1b7c":function(e,t,n){e.exports=n.p+"media/inflate-goal.5cc73592.mp4"},"25f3":function(e,t,n){"use strict";var r=n("09da"),a=n.n(r);a.a},"3b15":function(e,t,n){"use strict";var r=n("184a"),a=n.n(r);a.a},"4ba6":function(e,t,n){e.exports=n.p+"img/kipsta-logo.50e06b72.svg"},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var r=n("2b0e"),a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"relative",attrs:{id:"app"}},[r("video",{staticClass:"w-full h-full absolute inset-0 -z-1",attrs:{src:n("c303"),autoplay:"",loop:"",muted:"",playsinline:"",preload:"metadata"},domProps:{muted:!0}}),e._m(0),r("fade-transition",[r("start-screen",{directives:[{name:"show",rawName:"v-show",value:"StartScreen"===e.screen,expression:"screen === 'StartScreen'"}]})],1),r("fade-transition",[r("game-screen",{directives:[{name:"show",rawName:"v-show",value:"GameScreen"===e.screen,expression:"screen === 'GameScreen'"}],ref:"gameScreen",attrs:{"active-stage-index":e.activeStageIndex,stages:e.stages}})],1),r("fade-transition",[r("winners-screen",{directives:[{name:"show",rawName:"v-show",value:"WinnersScreen"===e.screen,expression:"screen === 'WinnersScreen'"}],attrs:{winners:e.winners}})],1),r("fade-transition",[r("winner-screen",{directives:[{name:"show",rawName:"v-show",value:e.winnerScreenVisible,expression:"winnerScreenVisible"}],attrs:{winner:e.winner}})],1)],1)},s=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"w-full absolute bottom-0 left-0 z-20 px-16 py-6 bg-red-500"},[r("img",{attrs:{src:n("4ba6"),alt:"Kipsta",id:"kipsta-logo"}})])}],i=(n("96cf"),n("3b8d")),o=(n("20d6"),n("7514"),n("7f7f"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"fade"}},[e._t("default")],2)}),c=[],l={name:"FadeTransition"},u=l,f=(n("eb34"),n("2877")),d=Object(f["a"])(u,o,c,!1,null,null,null),m=d.exports,p=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"screen"},[r("div",{staticClass:"w-1/2 h-1/2 absolute top-1/2 left-1/2 -translate-1/2 rounded-full border-16 border-white overflow-hidden"},[r("video",{ref:"video",staticClass:"w-full h-full absolute top-0 left-0 object-cover",attrs:{src:n("1b7c"),muted:"",playsinline:"",preload:"metadata"},domProps:{muted:!0},on:{play:function(t){e.videoPlaying=!0},pause:function(t){e.videoPlaying=!1}}}),r("div",{directives:[{name:"show",rawName:"v-show",value:!e.videoPlaying,expression:"!videoPlaying"}],staticClass:"w-full h-full flex flex-col justify-center absolute top-0 left-0 p-40 bg-purple-50 text-white text-center"},[e._m(0),r("p",{staticClass:"mb-2 text-5xl leading-none"},[e._v("Commentez, apparaissez...")]),r("p",{staticClass:"font-black text-12xl text-shadow-red-500 leading-none uppercase"},[e._v("Gagnez !")])])]),e._l(e.stages,function(t,n){return r("div",{staticClass:"w-64 h-64 absolute top-1/2 left-1/2 -mt-32 -ml-32",style:e.outerTransform(n)},[r("avatar",{staticClass:"w-full h-full flex justify-center items-center",class:e.stageClass(n),style:e.innerTransform(n),attrs:{"is-winner":!!e.findWinner(t)}},[r("span",{staticClass:"text-12xl text-white text-shadow-red-500"},[e._v(e._s(n+1))]),n!==e.activeStageIndex||t.winner?e._e():r("image-loop",{staticClass:"w-full h-full absolute top-0 left-0",attrs:{images:t.comments.map(function(e){return e.avatar}),"image-class":"w-full h-full rounded-full"}}),e.findWinner(t)?r("img",{staticClass:"w-full h-full absolute top-0 left-0 rounded-full object-cover",attrs:{src:e.findWinner(t).avatar,alt:e.findWinner(t).name}}):e._e()],1)],1)})],2)},v=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"flex items-end -mx-8 mb-16"},[r("div",{staticClass:"w-1/3 px-8"},[r("img",{attrs:{src:n("9b69"),alt:""}})]),r("div",{staticClass:"w-1/3 px-8"},[r("img",{attrs:{src:n("f2e9"),alt:""}})]),r("div",{staticClass:"w-1/3 px-8"},[r("img",{attrs:{src:n("fb5c"),alt:""}})])])}],g=(n("c5f6"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"rounded-full border-8 border-white bg-purple-500"},[e._t("default"),r("fade-transition",[r("div",{directives:[{name:"show",rawName:"v-show",value:e.isWinner,expression:"isWinner"}],staticClass:"w-16 h-16 p-4 absolute right-0 bottom-0 bg-red-500 rounded-full flex justify-center items-center"},[r("img",{attrs:{src:n("fb5c"),alt:""}})])])],2)}),h=[],b={name:"Avatar",components:{FadeTransition:m},props:{isWinner:{type:Boolean,default:!1}}},w=b,x=Object(f["a"])(w,g,h,!1,null,"4f4dbb08",null),y=x.exports,_=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",e._l(e.images,function(t,r){return n("img",{directives:[{name:"show",rawName:"v-show",value:r===e.activeImage,expression:"i === activeImage"}],staticClass:"absolute top-1/2 left-1/2 -translate-1/2",class:e.imageClass,attrs:{src:t,alt:""}})}),0)},S=[],C={name:"ImageLoop",props:{images:{type:Array,default:function(){return[]}},imageClass:{type:[String,Array,Object],default:function(){return""}},interval:{type:Number,default:2e3}},data:function(){return{activeImage:0}},methods:{start:function(){var e=this;this.intervalId&&this.stop(),this.intervalId=setInterval(function(){return e.activeImage=(e.activeImage+1)%e.images.length},this.interval)},stop:function(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null)}},watch:{images:function(){this.images.length>1?this.start():this.stop()}},mounted:function(){this.images.length>1&&this.start()},beforeDestroy:function(){this.stop()}},$=C,j=Object(f["a"])($,_,S,!1,null,null,null),I=j.exports,W={name:"GameScreen",components:{Avatar:y,ImageLoop:I},props:{activeStageIndex:{type:Number,default:0},stages:{type:Array,default:function(){return[]}}},data:function(){return{videoPlaying:!1}},computed:{activeStage:function(){return this.stages[this.activeStageIndex]}},methods:{outerTransform:function(e){return{transform:"rotate(".concat(360/this.stages.length*e-90,"deg) translateX(700px)")}},innerTransform:function(e){return{transform:"rotate(".concat(-360/this.stages.length*e+90,"deg)")}},stageClass:function(e){return{"border-red-500":e===this.activeStageIndex,"border-white":e!==this.activeStageIndex,"opacity-50":e>this.activeStageIndex}},playVideo:function(){var e=this;return this.$refs.video.play(),new Promise(function(t){e.$refs.video.addEventListener("ended",function(){e.$refs.video.currentTime=0,t()},{once:!0})})},findWinner:function(e){return e.comments.find(function(e){return e.isWinner})}}},O=W,k=Object(f["a"])(O,p,v,!1,null,null,null),P=k.exports,E=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"screen"},[n("image-loop",{staticClass:"relative top-1/2 left-1/2 -translate-1/2",attrs:{images:e.images}})],1)},A=[],T={name:"StartScreen",components:{ImageLoop:I},data:function(){return{images:[n("7939"),n("1664"),n("8d03")]}}},N=T,V=Object(f["a"])(N,E,A,!1,null,null,null),z=V.exports,G=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"screen flex flex-col justify-center bg-purple-500 bg-no-repeat bg-center bg-cover text-white text-center"},[n("p",{staticClass:"font-black text-16xl text-shadow-red-500 uppercase"},[e._v("Bravo !")]),n("p",{staticClass:"text-8xl"},[e._v(e._s(e.winner.name))]),n("img",{staticClass:"w-128 h-128 mx-auto mb-16 border-8 border-white rounded-full",attrs:{src:e.winner.avatar,alt:e.winner.name}}),e._m(0)])},L=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",{staticClass:"text-6xl"},[e._v("\n        Vous remportez un but gonflable\n        "),n("strong",{staticClass:"block text-8xl text-red-500"},[e._v("Kipsta KG500")])])}],M={name:"WinnerScreen",props:{winner:{type:Object,required:!0}}},F=M,R=(n("9c1d"),Object(f["a"])(F,G,L,!1,null,"cc794672",null)),K=R.exports,B=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"screen"},[e._m(0),e._l(e.groupedWinners,function(t,r){return n("div",{staticClass:"flex justify-center -mx-10 mb-16"},e._l(t,function(t,a){return n("div",{staticClass:"px-10",class:{"-mt-20":(1===r||2===r)&&(0===a||3===a)}},[n("avatar",{staticClass:"w-64 h-64 mx-auto relative",attrs:{"is-winner":""}},[n("img",{staticClass:"w-full h-full absolute top-0 left-0 rounded-full object-cover",attrs:{src:t.avatar,alt:t.name}})]),n("div",{staticClass:"w-96 flex justify-center items-center"},[n("p",{staticClass:"text-4xl text-white whitespace-no-wrap"},[e._v(e._s(t.name))])])],1)}),0)})],2)},D=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",{staticClass:"mt-16 mb-32 font-black text-6xl text-center text-white uppercase"},[e._v("\n        Merci à tous d’avoir participé "),n("br"),e._v(" Félicitations aux gagnants !\n    ")])}],J={name:"WinnersScreen",components:{Avatar:y},props:{winners:{type:Array,default:function(){return[]}}},computed:{groupedWinners:function(){return[this.winners.slice(0,2),this.winners.slice(2,6),this.winners.slice(6,10),this.winners.slice(10)]}}},Z=J,q=(n("3b15"),Object(f["a"])(Z,B,D,!1,null,"d2649b4a",null)),X=q.exports;n("5df3"),n("1c4c"),n("a481");function H(e){return e.replace(/([a-z0-9]|(?=[A-Z]))([A-Z])/g,"$1-$2").toLowerCase()}function Q(e){return new Promise(function(t){return setTimeout(t,e)})}function U(e){return Array.from(Array(e))}var Y=3e4,ee={name:"App",components:{FadeTransition:m,GameScreen:P,StartScreen:z,WinnerScreen:K,WinnersScreen:X},data:function(){return{screen:z.name,winnerScreenVisible:!1,activeStageIndex:0,stages:U(11).map(function(){return{winner:null,comments:[]}})}},computed:{activeStage:function(){return this.stages[this.activeStageIndex]||null},winner:function(){return this.activeStage&&this.activeStage.comments.find(function(e){return e.isWinner})||{}},winners:function(){return this.stages.map(function(e){return e.comments.find(function(e){return e.isWinner})}).filter(function(e){return!!e})}},methods:{findCommentIndex:function(e){return this.activeStage.comments.findIndex(function(t){return t.id===e})},findComment:function(e){return this.activeStage.comments.find(function(t){return t.id===e})},setWinner:function(e,t){var n=this.findComment(e);n&&(n.isWinner=t)}},mounted:function(){var e=this;this.$root.$on("set-stages",function(t){return e.stages=t}),this.$root.$on("set-winner-screen-duration",function(e){return Y=e}),this.$root.$on("show-game-screen",function(){return e.screen=P.name}),this.$root.$on("show-winners-screen",function(){return e.screen=X.name}),this.$root.$on("add-comment",function(t){e.activeStage.comments.push(t)}),this.$root.$on("remove-comment",function(t){var n=e.findCommentIndex(t);-1!==n&&e.activeStage.comments.splice(n,1)}),this.$root.$on("set-comment-is-winner",function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(n,r){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e.setWinner(n,r),t.next=3,e.$refs.gameScreen.playVideo();case 3:return e.winnerScreenVisible=!0,t.next=6,Q(Y);case 6:return e.winnerScreenVisible=!1,t.next=9,Q(300);case 9:e.activeStageIndex++;case 10:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}())}},te=ee,ne=(n("25f3"),Object(f["a"])(te,a,s,!1,null,null,null)),re=ne.exports,ae=n("768b"),se=(n("ac4d"),n("8a81"),n("ac6a"),n("d225")),ie=n("b0b4"),oe=n("359c"),ce=n.n(oe),le=function(){function e(t){return Object(se["a"])(this,e),this._vm=t,new Proxy(this,{get:function(e,t){return t in e?e[t]:function(){for(var n,r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];(n=e._vm).$emit.apply(n,[H(t)].concat(a))}}})}return Object(ie["a"])(e,[{key:"demo",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t,n,r,a,s,i,o,c,l,u=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return console.log("set stages"),t=U(11).map(function(){return{winner:null,comments:[]}}),this.setStages(t),this.setWinnerScreenDuration(3e3),e.next=6,Q(2e3);case 6:console.log("show game screen"),this.showGameScreen(),n=!0,r=!1,a=void 0,e.prev=11,s=t.entries()[Symbol.iterator]();case 13:if(n=(i=s.next()).done){e.next=27;break}return o=Object(ae["a"])(i.value,2),c=o[0],o[1],l=U(ce.a.random.number({min:2,max:6})).map(function(){return{id:ce.a.random.uuid(),name:ce.a.name.findName(),avatar:ce.a.internet.avatar(),isWinner:!1}}),console.log("add comments to stage ".concat(c+1),l),l.forEach(function(e){return u.addComment(e)}),e.next=20,Q(5e3);case 20:return console.log("add winner to stage ".concat(c+1)),this.setCommentIsWinner(ce.a.random.arrayElement(l).id,!0),e.next=24,Q(1e4);case 24:n=!0,e.next=13;break;case 27:e.next=33;break;case 29:e.prev=29,e.t0=e["catch"](11),r=!0,a=e.t0;case 33:e.prev=33,e.prev=34,n||null==s.return||s.return();case 36:if(e.prev=36,!r){e.next=39;break}throw a;case 39:return e.finish(36);case 40:return e.finish(33);case 41:console.log("show winners screen"),this.showWinnersScreen();case 43:case"end":return e.stop()}},e,this,[[11,29,33,41],[34,,36,40]])}));function t(){return e.apply(this,arguments)}return t}()}]),e}(),ue=new r["a"]({el:"#app",render:function(e){return e(re)}});window.kipsta=new le(ue)},7939:function(e,t,n){e.exports=n.p+"img/goal-grey.4b009604.png"},"8d03":function(e,t,n){e.exports=n.p+"img/goal-orange.bd71b3b6.png"},"9b69":function(e,t,n){e.exports=n.p+"img/chat.10712a5e.svg"},"9c1d":function(e,t,n){"use strict";var r=n("c675"),a=n.n(r);a.a},c303:function(e,t,n){e.exports=n.p+"media/background-animation.6cd716d9.mp4"},c675:function(e,t,n){},eb34:function(e,t,n){"use strict";var r=n("0ff6"),a=n.n(r);a.a},f2e9:function(e,t,n){e.exports=n.p+"img/avatar.86e03194.svg"},fb5c:function(e,t,n){e.exports=n.p+"img/gift.fd8ccfd1.svg"}});
//# sourceMappingURL=app.8ca0c65b.js.map